{
  "kind": "GitOpsCluster",
  "apiVersion": "apps.open-cluster-management.io/v1beta1",
  "metadata": {
    "group": "apps.open-cluster-management.io",
    "version": "v1beta1",
    "plural": "gitopsclusters",
    "singular": "gitopscluster",
    "scope": "Namespaced"
  },
  "spec": {
    "description": "GitOpsClusterSpec defines the desired state of GitOpsCluster.",
    "fields": {
      "argoServer": {
        "type": "object",
        "description": "ArgoServerSpec specifies the location of the Argo CD server.",
        "required": true,
        "fields": {
          "argoNamespace": {
            "type": "string",
            "description": "ArgoNamespace is the namespace in which the Argo CD server is installed.",
            "required": true
          },
          "cluster": {
            "type": "string",
            "description": "Not used and reserved for defining a managed cluster name."
          }
        }
      },
      "createBlankClusterSecrets": {
        "type": "boolean",
        "description": "Internally used."
      },
      "createPolicyTemplate": {
        "type": "boolean",
        "description": "Create default policy template if it is true."
      },
      "gitopsAddon": {
        "type": "object",
        "description": "GitOpsAddon defines the configuration for the GitOps addon.",
        "fields": {
          "argoCDAgent": {
            "type": "object",
            "description": "ArgoCDAgent defines the configuration for the ArgoCD agent.",
            "fields": {
              "enabled": {
                "type": "boolean",
                "description": "Enabled indicates whether the ArgoCD agent is enabled. Default is false.",
                "default": false
              },
              "image": {
                "type": "string",
                "description": "Image specifies the ArgoCD agent container image. Default is empty."
              },
              "mode": {
                "type": "string",
                "description": "Mode specifies the ArgoCD agent mode. Default is empty."
              },
              "propagateHubCA": {
                "type": "boolean",
                "description": "PropagateHubCA indicates whether to propagate the hub CA certificate to managed clusters via ManifestWork. Default is true.",
                "default": true
              },
              "serverAddress": {
                "type": "string",
                "description": "ServerAddress specifies the ArgoCD server address for the agent. Default is empty."
              },
              "serverPort": {
                "type": "string",
                "description": "ServerPort specifies the ArgoCD server port for the agent. Default is empty."
              }
            }
          },
          "enabled": {
            "type": "boolean",
            "description": "Enabled indicates whether the GitOps addon is enabled. Default is false.\nWhen enabled, creates AddonDeploymentConfigs/ManagedClusterAddon resources.",
            "default": false
          },
          "gitOpsImage": {
            "type": "string",
            "description": "GitOpsImage specifies the GitOps (ArgoCD) container image. Default is empty."
          },
          "gitOpsNamespace": {
            "type": "string",
            "description": "GitOpsNamespace specifies the GitOps namespace. Default is empty."
          },
          "gitOpsOperatorImage": {
            "type": "string",
            "description": "GitOpsOperatorImage specifies the GitOps operator container image. Default is empty."
          },
          "gitOpsOperatorNamespace": {
            "type": "string",
            "description": "GitOpsOperatorNamespace specifies the GitOps operator namespace. Default is empty."
          },
          "olmSubscription": {
            "type": "object",
            "description": "OLMSubscription defines the configuration for deploying the full OLM-managed\nOpenShift GitOps operator instead of the lightweight helm-based deployment.\nThis is only supported on OpenShift ManagedClusters with OLM installed.\nWhen enabled, this takes precedence over the helm-based deployment.\nRequires gitopsAddon.enabled to be true.",
            "fields": {
              "channel": {
                "type": "string",
                "description": "Channel is the OLM channel. Default is \"stable\"."
              },
              "enabled": {
                "type": "boolean",
                "description": "Enabled indicates whether to deploy via OLM Subscription. Default is false.\nWhen enabled, the full OLM-managed OpenShift GitOps operator is deployed\ninstead of the lightweight helm-based operator.",
                "default": false
              },
              "installPlanApproval": {
                "type": "string",
                "description": "InstallPlanApproval determines if InstallPlans should be automatically approved.\nDefault is \"Automatic\".",
                "enum": [
                  "Automatic",
                  "Manual"
                ]
              },
              "name": {
                "type": "string",
                "description": "Name is the name of the Subscription. Default is \"openshift-gitops-operator\"."
              },
              "namespace": {
                "type": "string",
                "description": "Namespace is the namespace for the Subscription. Default is \"openshift-operators\"."
              },
              "source": {
                "type": "string",
                "description": "Source is the CatalogSource name. Default is \"redhat-operators\"."
              },
              "sourceNamespace": {
                "type": "string",
                "description": "SourceNamespace is the CatalogSource namespace. Default is \"openshift-marketplace\"."
              }
            }
          },
          "overrideExistingConfigs": {
            "type": "boolean",
            "description": "OverrideExistingConfigs indicates whether to override existing configuration values in AddOnDeploymentConfig.\nWhen false (default), existing config values are preserved and only new ones are added.\nWhen true, config values from GitOpsCluster spec will override existing values.",
            "default": false
          },
          "reconcileScope": {
            "type": "string",
            "description": "ReconcileScope specifies the reconcile scope for the GitOps operator. Default is empty."
          },
          "redisImage": {
            "type": "string",
            "description": "RedisImage specifies the Redis container image. Default is empty."
          }
        }
      },
      "managedServiceAccountRef": {
        "type": "string",
        "description": "ManagedServiceAccountRef defines managed service account in the managed cluster namespace used to create the ArgoCD cluster secret."
      },
      "placementRef": {
        "type": "object",
        "description": "ObjectReference contains enough information to let you inspect or modify the referred object.",
        "required": true,
        "fields": {
          "apiVersion": {
            "type": "string",
            "description": "API version of the referent."
          },
          "fieldPath": {
            "type": "string",
            "description": "If referring to a piece of an object instead of an entire object, this string\nshould contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].\nFor example, if the object reference is to a container within a pod, this would take on a value like:\n\"spec.containers{name}\" (where \"name\" refers to the name of the container that triggered\nthe event) or if no container name is specified \"spec.containers[2]\" (container with\nindex 2 in this pod). This syntax is chosen only to have some well-defined way of\nreferencing a part of an object."
          },
          "kind": {
            "type": "string",
            "description": "Kind of the referent.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
          },
          "name": {
            "type": "string",
            "description": "Name of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names"
          },
          "namespace": {
            "type": "string",
            "description": "Namespace of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/"
          },
          "resourceVersion": {
            "type": "string",
            "description": "Specific resourceVersion to which this reference is made, if any.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency"
          },
          "uid": {
            "type": "string",
            "description": "UID of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids"
          }
        }
      }
    }
  },
  "status": {
    "description": "GitOpsClusterStatus defines the observed state of GitOpsCluster.",
    "fields": {
      "conditions": {
        "type": "array",
        "description": "Conditions represent the latest available observations of the GitOpsCluster's current state.",
        "fields": {
          "lastTransitionTime": {
            "type": "string",
            "description": "lastTransitionTime is the last time the condition transitioned from one status to another.\nThis should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.",
            "required": true
          },
          "message": {
            "type": "string",
            "description": "message is a human readable message indicating details about the transition.\nThis may be an empty string.",
            "required": true
          },
          "observedGeneration": {
            "type": "integer",
            "description": "observedGeneration represents the .metadata.generation that the condition was set based upon.\nFor instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date\nwith respect to the current state of the instance.",
            "validations": {
              "minimum": 0
            }
          },
          "reason": {
            "type": "string",
            "description": "reason contains a programmatic identifier indicating the reason for the condition's last transition.\nProducers of specific condition types may define expected values and meanings for this field,\nand whether the values are considered a guaranteed API.\nThe value should be a CamelCase string.\nThis field may not be empty.",
            "required": true,
            "validations": {
              "pattern": "^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$"
            }
          },
          "status": {
            "type": "string",
            "description": "status of the condition, one of True, False, Unknown.",
            "required": true,
            "enum": [
              "True",
              "False",
              "Unknown"
            ]
          },
          "type": {
            "type": "string",
            "description": "type of condition in CamelCase or in foo.example.com/CamelCase.",
            "required": true,
            "validations": {
              "pattern": "^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$"
            }
          }
        }
      },
      "lastUpdateTime": {
        "type": "string",
        "description": "LastUpdateTime provides the last updated timestamp of the gitOpsCluster status"
      },
      "message": {
        "type": "string",
        "description": "Message provides the detailed message of the GitOpsCluster status."
      },
      "phase": {
        "type": "string",
        "description": "Phase provides the overall phase of the GitOpsCluster status. Valid values include failed or successful.\nThis field is kept for backward compatibility. For detailed status information, use the Conditions field."
      }
    }
  },
  "exampleYAML": "apiVersion: apps.open-cluster-management.io/v1beta1\nkind: GitOpsCluster\nmetadata:\n  name: example-gitopscluster\n  namespace: default\nspec:\n  argoServer: {}\n  placementRef: {}\n"
}