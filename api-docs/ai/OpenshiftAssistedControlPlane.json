{
  "kind": "OpenshiftAssistedControlPlane",
  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha2",
  "metadata": {
    "group": "controlplane.cluster.x-k8s.io",
    "version": "v1alpha2",
    "plural": "openshiftassistedcontrolplanes",
    "singular": "openshiftassistedcontrolplane",
    "scope": "Namespaced"
  },
  "spec": {
    "description": "OpenshiftAssistedControlPlaneSpec defines the desired state of OpenshiftAssistedControlPlane",
    "fields": {
      "config": {
        "type": "object",
        "description": "Config specs for the OpenshiftAssistedControlPlane",
        "fields": {
          "apiVIPs": {
            "type": "array",
            "description": "APIVIPs are the virtual IPs used to reach the OpenShift cluster's API.\nEnter one IP address for single-stack clusters, or up to two for dual-stack clusters (at\nmost one IP address per IP stack used). The order of stacks should be the same as order\nof subnets in Cluster Networks, Service Networks, and Machine Networks."
          },
          "baseDomain": {
            "type": "string",
            "description": "BaseDomain is the base domain to which the cluster should belong.",
            "required": true
          },
          "capabilities": {
            "type": "object",
            "description": "Capabilities specifies the capabilities set during an OpenShift cluster installation.",
            "fields": {
              "additionalEnabledCapabilities": {
                "type": "array",
                "description": "AdditionalEnabledCapabilities is a list of OpenShift capabilities to specifically enable\nduring the installation of the workload cluster. It is empty by default."
              },
              "baselineCapability": {
                "type": "string",
                "description": "BaselineCapability provides a default set of capabilities to enable during the installation.\nValid values are vCurrent, v4.x, or None. See the OpenShift doc for more details.\nDefaults to None for baremetal platform workload clusters or vCurrent otherwise."
              }
            }
          },
          "clusterName": {
            "type": "string",
            "description": "ClusterName is the friendly name of the cluster. It is used for subdomains,\nsome resource tagging, and other instances where a friendly name for the\ncluster is useful.\nIf not defined ClusterName will be set as the CAPI ClusterName"
          },
          "diskEncryption": {
            "type": "object",
            "description": "DiskEncryption is the configuration to enable/disable disk encryption for cluster nodes.",
            "fields": {
              "enableOn": {
                "type": "string",
                "description": "Enable/disable disk encryption on master nodes, worker nodes, or all nodes.",
                "enum": [
                  "none",
                  "all",
                  "masters",
                  "workers"
                ],
                "default": "none"
              },
              "mode": {
                "type": "string",
                "description": "The disk encryption mode to use.",
                "enum": [
                  "tpmv2",
                  "tang"
                ]
              },
              "tangServers": {
                "type": "string",
                "description": "JSON-formatted string containing additional information regarding tang's configuration"
              }
            }
          },
          "imageRegistryRef": {
            "type": "object",
            "description": "ImageRegistryRef is a reference to a configmap containing both the additional\nimage registries and their corresponding certificate bundles to be used in the spoke cluster",
            "fields": {
              "name": {
                "type": "string",
                "description": "Name of the referent.\nThis field is effectively required, but due to backwards compatibility is\nallowed to be empty. Instances of this type with an empty value here are\nalmost certainly wrong.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names",
                "default": ""
              }
            }
          },
          "ingressVIPs": {
            "type": "array",
            "description": "IngressVIPs are the virtual IPs used for cluster ingress traffic.\nEnter one IP address for single-stack clusters, or up to two for dual-stack clusters (at\nmost one IP address per IP stack used). The order of stacks should be the same as order\nof subnets in Cluster Networks, Service Networks, and Machine Networks."
          },
          "manifestsConfigMapRefs": {
            "type": "array",
            "description": "ManifestsConfigMapRefs is an array of references to user-provided manifests ConfigMaps to\nadd to or replace manifests that are generated by the installer.\nManifest names in each ConfigMap should be unique across all referenced ConfigMaps.",
            "fields": {
              "name": {
                "type": "string",
                "description": "Name is the name of the ConfigMap that this refers to",
                "required": true
              }
            }
          },
          "mastersSchedulable": {
            "type": "boolean",
            "description": "Set to true to allow control plane nodes to be schedulable"
          },
          "proxy": {
            "type": "object",
            "description": "Proxy defines the proxy settings used for the install config",
            "fields": {
              "httpProxy": {
                "type": "string",
                "description": "HTTPProxy is the URL of the proxy for HTTP requests."
              },
              "httpsProxy": {
                "type": "string",
                "description": "HTTPSProxy is the URL of the proxy for HTTPS requests."
              },
              "noProxy": {
                "type": "string",
                "description": "NoProxy is a comma-separated list of domains and CIDRs for which the proxy should not be\nused."
              }
            }
          },
          "pullSecretRef": {
            "type": "object",
            "description": "PullSecretRef references pull secret necessary for the cluster installation",
            "fields": {
              "name": {
                "type": "string",
                "description": "Name of the referent.\nThis field is effectively required, but due to backwards compatibility is\nallowed to be empty. Instances of this type with an empty value here are\nalmost certainly wrong.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names",
                "default": ""
              }
            }
          },
          "sshAuthorizedKey": {
            "type": "string",
            "description": "SSHAuthorizedKey ssh key for accessing the cluster nodes after reboot"
          }
        }
      },
      "distributionVersion": {
        "type": "string",
        "description": "DistributionVersion describes the targeted OpenShift version",
        "required": true
      },
      "machineTemplate": {
        "type": "object",
        "description": "No description provided.",
        "required": true,
        "fields": {
          "infrastructureRef": {
            "type": "object",
            "description": "InfrastructureRef is a required reference to a custom resource\noffered by an infrastructure provider.",
            "required": true,
            "fields": {
              "apiVersion": {
                "type": "string",
                "description": "API version of the referent."
              },
              "fieldPath": {
                "type": "string",
                "description": "If referring to a piece of an object instead of an entire object, this string\nshould contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].\nFor example, if the object reference is to a container within a pod, this would take on a value like:\n\"spec.containers{name}\" (where \"name\" refers to the name of the container that triggered\nthe event) or if no container name is specified \"spec.containers[2]\" (container with\nindex 2 in this pod). This syntax is chosen only to have some well-defined way of\nreferencing a part of an object."
              },
              "kind": {
                "type": "string",
                "description": "Kind of the referent.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
              },
              "name": {
                "type": "string",
                "description": "Name of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names"
              },
              "namespace": {
                "type": "string",
                "description": "Namespace of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/"
              },
              "resourceVersion": {
                "type": "string",
                "description": "Specific resourceVersion to which this reference is made, if any.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency"
              },
              "uid": {
                "type": "string",
                "description": "UID of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids"
              }
            }
          },
          "metadata": {
            "type": "object",
            "description": "Standard object's metadata.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata",
            "fields": {
              "annotations": {
                "type": "object",
                "description": "annotations is an unstructured key value map stored with a resource that may be\nset by external tools to store and retrieve arbitrary metadata. They are not\nqueryable and should be preserved when modifying objects.\nMore info: http://kubernetes.io/docs/user-guide/annotations"
              },
              "labels": {
                "type": "object",
                "description": "Map of string keys and values that can be used to organize and categorize\n(scope and select) objects. May match selectors of replication controllers\nand services.\nMore info: http://kubernetes.io/docs/user-guide/labels"
              }
            }
          },
          "nodeDeletionTimeout": {
            "type": "string",
            "description": "NodeDeletionTimeout defines how long the machine controller will attempt to delete the Node that the Machine\nhosts after the Machine is marked for deletion. A duration of 0 will retry deletion indefinitely.\nIf no value is provided, the default value for this property of the Machine resource will be used."
          },
          "nodeDrainTimeout": {
            "type": "string",
            "description": "NodeDrainTimeout is the total amount of time that the controller will spend on draining a controlplane node\nThe default value is 0, meaning that the node can be drained without any time limitations.\nNOTE: NodeDrainTimeout is different from `kubectl drain --timeout`"
          },
          "nodeVolumeDetachTimeout": {
            "type": "string",
            "description": "NodeVolumeDetachTimeout is the total amount of time that the controller will spend on waiting for all volumes\nto be detached. The default value is 0, meaning that the volumes can be detached without any time limitations."
          }
        }
      },
      "openshiftAssistedConfigSpec": {
        "type": "object",
        "description": "OpenshiftAssistedConfigSpec defines the desired state of OpenshiftAssistedConfig",
        "fields": {
          "additionalNTPSources": {
            "type": "array",
            "description": "AdditionalNTPSources is a list of NTP sources (hostname or IP) to be added to all cluster\nhosts. They are added to any NTP sources that were configured through other means."
          },
          "additionalTrustBundle": {
            "type": "string",
            "description": "PEM-encoded X.509 certificate bundle. Hosts discovered by this\ninfra-env will trust the certificates in this bundle. Clusters formed\nfrom the hosts discovered by this infra-env will also trust the\ncertificates in this bundle."
          },
          "cpuArchitecture": {
            "type": "string",
            "description": "CpuArchitecture specifies the target CPU architecture. Default is x86_64",
            "default": "x86_64"
          },
          "kernelArguments": {
            "type": "array",
            "description": "KernelArguments is the additional kernel arguments to be passed during boot time of the discovery image.\nApplicable for both iPXE, and ISO streaming from Image Service.",
            "fields": {
              "operation": {
                "type": "string",
                "description": "Operation is the operation to apply on the kernel argument.",
                "enum": [
                  "append",
                  "replace",
                  "delete"
                ]
              },
              "value": {
                "type": "string",
                "description": "Value can have the form <parameter> or <parameter>=<value>. The following examples should be supported:\nrd.net.timeout.carrier=60\nisolcpus=1,2,10-20,100-2000:2/25\nquiet",
                "validations": {
                  "pattern": "^(?:(?:[^ \\t\\n\\r\"]+)|(?:\"[^\"]*\"))+$"
                }
              }
            }
          },
          "nmStateConfigLabelSelector": {
            "type": "object",
            "description": "NmstateConfigLabelSelector associates NMStateConfigs for hosts that are considered part\nof this installation environment.",
            "fields": {
              "matchExpressions": {
                "type": "array",
                "description": "matchExpressions is a list of label selector requirements. The requirements are ANDed.",
                "fields": {
                  "key": {
                    "type": "string",
                    "description": "key is the label key that the selector applies to.",
                    "required": true
                  },
                  "operator": {
                    "type": "string",
                    "description": "operator represents a key's relationship to a set of values.\nValid operators are In, NotIn, Exists and DoesNotExist.",
                    "required": true
                  },
                  "values": {
                    "type": "array",
                    "description": "values is an array of string values. If the operator is In or NotIn,\nthe values array must be non-empty. If the operator is Exists or DoesNotExist,\nthe values array must be empty. This array is replaced during a strategic\nmerge patch."
                  }
                }
              },
              "matchLabels": {
                "type": "object",
                "description": "matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels\nmap is equivalent to an element of matchExpressions, whose key field is \"key\", the\noperator is \"In\", and the values array contains only \"value\". The requirements are ANDed."
              }
            }
          },
          "nodeRegistration": {
            "type": "object",
            "description": "NodeRegistrationOption holds fields related to registering nodes to the cluster",
            "fields": {
              "kubeletExtraLabels": {
                "type": "array",
                "description": "KubeletExtraLabels passes extra labels to kubelet."
              },
              "name": {
                "type": "string",
                "description": "Defaults to the hostname of the node if not provided."
              }
            }
          },
          "osImageVersion": {
            "type": "string",
            "description": "OSImageVersion is the version of OS image to use when generating the InfraEnv.\nThe version should refer to an OSImage specified in the AgentServiceConfig\n(i.e. OSImageVersion should equal to an OpenshiftVersion in OSImages list).\nNote: OSImageVersion can't be specified along with ClusterRef."
          },
          "proxy": {
            "type": "object",
            "description": "Proxy defines the proxy settings for agents and clusters that use the InfraEnv. If\nunset, the agents and clusters will not be configured to use a proxy.",
            "fields": {
              "httpProxy": {
                "type": "string",
                "description": "HTTPProxy is the URL of the proxy for HTTP requests."
              },
              "httpsProxy": {
                "type": "string",
                "description": "HTTPSProxy is the URL of the proxy for HTTPS requests."
              },
              "noProxy": {
                "type": "string",
                "description": "NoProxy is a comma-separated list of domains and CIDRs for which the proxy should not be\nused."
              }
            }
          },
          "pullSecretRef": {
            "type": "object",
            "description": "PullSecretRef is the reference to the secret to use when pulling images.",
            "fields": {
              "name": {
                "type": "string",
                "description": "Name of the referent.\nThis field is effectively required, but due to backwards compatibility is\nallowed to be empty. Instances of this type with an empty value here are\nalmost certainly wrong.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names",
                "default": ""
              }
            }
          },
          "sshAuthorizedKey": {
            "type": "string",
            "description": "SSHAuthorizedKey is a SSH public keys that will be added to all agents for use in debugging."
          }
        }
      },
      "replicas": {
        "type": "integer",
        "description": "No description provided."
      }
    }
  },
  "status": {
    "description": "OpenshiftAssistedControlPlaneStatus defines the observed state of OpenshiftAssistedControlPlane",
    "fields": {
      "clusterDeploymentRef": {
        "type": "object",
        "description": "ClusterDeploymentRef references the ClusterDeployment used to create the cluster",
        "fields": {
          "apiVersion": {
            "type": "string",
            "description": "API version of the referent."
          },
          "fieldPath": {
            "type": "string",
            "description": "If referring to a piece of an object instead of an entire object, this string\nshould contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].\nFor example, if the object reference is to a container within a pod, this would take on a value like:\n\"spec.containers{name}\" (where \"name\" refers to the name of the container that triggered\nthe event) or if no container name is specified \"spec.containers[2]\" (container with\nindex 2 in this pod). This syntax is chosen only to have some well-defined way of\nreferencing a part of an object."
          },
          "kind": {
            "type": "string",
            "description": "Kind of the referent.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
          },
          "name": {
            "type": "string",
            "description": "Name of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names"
          },
          "namespace": {
            "type": "string",
            "description": "Namespace of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/"
          },
          "resourceVersion": {
            "type": "string",
            "description": "Specific resourceVersion to which this reference is made, if any.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency"
          },
          "uid": {
            "type": "string",
            "description": "UID of the referent.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids"
          }
        }
      },
      "conditions": {
        "type": "array",
        "description": "Conditions defines current service state of the KubeadmControlPlane.",
        "fields": {
          "lastTransitionTime": {
            "type": "string",
            "description": "Last time the condition transitioned from one status to another.\nThis should be when the underlying condition changed. If that is not known, then using the time when\nthe API field changed is acceptable.",
            "required": true
          },
          "message": {
            "type": "string",
            "description": "A human readable message indicating details about the transition.\nThis field may be empty."
          },
          "reason": {
            "type": "string",
            "description": "The reason for the condition's last transition in CamelCase.\nThe specific API may choose whether or not this field is considered a guaranteed API.\nThis field may be empty."
          },
          "severity": {
            "type": "string",
            "description": "severity provides an explicit classification of Reason code, so the users or machines can immediately\nunderstand the current situation and act accordingly.\nThe Severity field MUST be set only when Status=False."
          },
          "status": {
            "type": "string",
            "description": "status of the condition, one of True, False, Unknown.",
            "required": true
          },
          "type": {
            "type": "string",
            "description": "type of condition in CamelCase or in foo.example.com/CamelCase.\nMany .condition.type values are consistent across resources like Available, but because arbitrary conditions\ncan be useful (see .node.status.conditions), the ability to deconflict is important.",
            "required": true
          }
        }
      },
      "distributionVersion": {
        "type": "string",
        "description": "DistributionVersion represents the current OpenShift version installed on the\ncontrol plane machines in the cluster."
      },
      "failureMessage": {
        "type": "string",
        "description": "ErrorMessage indicates that there is a terminal problem reconciling the\nstate, and will be set to a descriptive error message."
      },
      "failureReason": {
        "type": "string",
        "description": "FailureReason indicates that there is a terminal problem reconciling the\nstate, and will be set to a token value suitable for\nprogrammatic interpretation."
      },
      "initialized": {
        "type": "boolean",
        "description": "Initialized denotes whether or not the control plane has the\nuploaded kubeadm-config configmap."
      },
      "ready": {
        "type": "boolean",
        "description": "Ready denotes that the OpenshiftAssistedControlPlane API Server became ready during initial provisioning\nto receive requests.\nNOTE: this field is part of the Cluster API contract and it is used to orchestrate provisioning.\nThe value of this field is never updated after provisioning is completed. Please use conditions\nto check the operational state of the control plane."
      },
      "readyReplicas": {
        "type": "integer",
        "description": "Total number of fully running and ready control plane machines."
      },
      "replicas": {
        "type": "integer",
        "description": "Total number of non-terminated machines targeted by this control plane\n(their labels match the selector)."
      },
      "selector": {
        "type": "string",
        "description": "Selector is the label selector in string format to avoid introspection\nby clients, and is used to provide the CRD-based integration for the\nscale subresource and additional integrations for things like kubectl\ndescribe.. The string will be in the same format as the query-param syntax.\nMore info about label selectors: http://kubernetes.io/docs/user-guide/labels#label-selectors"
      },
      "unavailableReplicas": {
        "type": "integer",
        "description": "Total number of unavailable machines targeted by this control plane.\nThis is the total number of machines that are still required for\nthe deployment to have 100% available capacity. They may either\nbe machines that are running but not yet ready or machines\nthat still have not been created."
      },
      "updatedReplicas": {
        "type": "integer",
        "description": "Total number of non-terminated machines targeted by this control plane\nthat have the desired template spec."
      },
      "version": {
        "type": "string",
        "description": "Version represents the minimum Kubernetes version for the control plane machines\nin the cluster."
      }
    }
  },
  "exampleYAML": "apiVersion: controlplane.cluster.x-k8s.io/v1alpha2\nkind: OpenshiftAssistedControlPlane\nmetadata:\n  name: example-openshiftassistedcontrolplane\n  namespace: default\nspec:\n  distributionVersion: \"example-distributionVersion\"\n  machineTemplate: {}\n"
}