{
  "kind": "ROSAMachinePool",
  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta2",
  "metadata": {
    "group": "infrastructure.cluster.x-k8s.io",
    "version": "v1beta2",
    "plural": "rosamachinepools",
    "singular": "rosamachinepool",
    "scope": "Namespaced"
  },
  "spec": {
    "description": "RosaMachinePoolSpec defines the desired state of RosaMachinePool.",
    "fields": {
      "additionalSecurityGroups": {
        "type": "array",
        "description": "AdditionalSecurityGroups is an optional set of security groups to associate\nwith all node instances of the machine pool."
      },
      "additionalTags": {
        "type": "object",
        "description": "AdditionalTags are user-defined tags to be added on the underlying EC2 instances associated with this machine pool."
      },
      "autoRepair": {
        "type": "boolean",
        "description": "AutoRepair specifies whether health checks should be enabled for machines\nin the NodePool. The default is true.",
        "default": true
      },
      "autoscaling": {
        "type": "object",
        "description": "Autoscaling specifies auto scaling behaviour for this MachinePool.\nrequired if Replicas is not configured",
        "fields": {
          "maxReplicas": {
            "type": "integer",
            "description": "No description provided.",
            "validations": {
              "minimum": 1
            }
          },
          "minReplicas": {
            "type": "integer",
            "description": "No description provided.",
            "validations": {
              "minimum": 1
            }
          }
        }
      },
      "availabilityZone": {
        "type": "string",
        "description": "AvailabilityZone is an optinal field specifying the availability zone where instances of this machine pool should run\nFor Multi-AZ clusters, you can create a machine pool in a Single-AZ of your choice."
      },
      "capacityReservationID": {
        "type": "string",
        "description": "CapacityReservationID specifies the ID of an AWS On-Demand Capacity Reservation and Capacity Blocks for ML.\nThe CapacityReservationID must be pre-created in advance, before creating a NodePool."
      },
      "instanceType": {
        "type": "string",
        "description": "InstanceType specifies the AWS instance type",
        "required": true
      },
      "labels": {
        "type": "object",
        "description": "Labels specifies labels for the Kubernetes node objects"
      },
      "nodeDrainGracePeriod": {
        "type": "string",
        "description": "NodeDrainGracePeriod is grace period for how long Pod Disruption Budget-protected workloads will be\nrespected during upgrades. After this grace period, any workloads protected by Pod Disruption\nBudgets that have not been successfully drained from a node will be forcibly evicted.\nValid values are from 0 to 1 week(10080m|168h) .\n0 or empty value means that the MachinePool can be drained without any time limitation."
      },
      "nodePoolName": {
        "type": "string",
        "description": "NodePoolName specifies the name of the nodepool in Rosa\nmust be a valid DNS-1035 label, so it must consist of lower case alphanumeric and have a max length of 15 characters.",
        "required": true,
        "validations": {
          "pattern": "^[a-z]([-a-z0-9]*[a-z0-9])?$"
        }
      },
      "providerIDList": {
        "type": "array",
        "description": "ProviderIDList contain a ProviderID for each machine instance that's currently managed by this machine pool."
      },
      "subnet": {
        "type": "string",
        "description": "No description provided."
      },
      "taints": {
        "type": "array",
        "description": "Taints specifies the taints to apply to the nodes of the machine pool",
        "fields": {
          "effect": {
            "type": "string",
            "description": "The effect of the taint on pods that do not tolerate the taint.\nValid effects are NoSchedule, PreferNoSchedule and NoExecute.",
            "required": true,
            "enum": [
              "NoSchedule",
              "PreferNoSchedule",
              "NoExecute"
            ]
          },
          "key": {
            "type": "string",
            "description": "The taint key to be applied to a node.",
            "required": true
          },
          "value": {
            "type": "string",
            "description": "The taint value corresponding to the taint key.",
            "validations": {
              "pattern": "^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$"
            }
          }
        }
      },
      "tuningConfigs": {
        "type": "array",
        "description": "TuningConfigs specifies the names of the tuning configs to be applied to this MachinePool.\nTuning configs must already exist."
      },
      "updateConfig": {
        "type": "object",
        "description": "UpdateConfig specifies update configurations.",
        "fields": {
          "rollingUpdate": {
            "type": "object",
            "description": "RollingUpdate specifies MaxUnavailable & MaxSurge number of nodes during update.",
            "fields": {
              "maxSurge": {
                "type": "N/A",
                "description": "MaxSurge is the maximum number of nodes that can be provisioned above the desired number of nodes.\nValue can be an absolute number (ex: 5) or a percentage of desired nodes (ex: 10%).\nAbsolute number is calculated from percentage by rounding up.\nMaxSurge can not be 0 if MaxUnavailable is 0, default is 1.\nBoth MaxSurge & MaxUnavailable must use the same units (absolute value or percentage).\nExample: when MaxSurge is set to 30%, new nodes can be provisioned immediately\nwhen the rolling update starts, such that the total number of old and new\nnodes do not exceed 130% of desired nodes. Once old nodes have been\ndeleted, new nodes can be provisioned, ensuring that total number of nodes\nrunning at any time during the update is at most 130% of desired nodes.",
                "default": 1,
                "validations": {
                  "pattern": "^((100|[0-9]{1,2})%|[0-9]+)$"
                }
              },
              "maxUnavailable": {
                "type": "N/A",
                "description": "MaxUnavailable is the maximum number of nodes that can be unavailable during the update.\nValue can be an absolute number (ex: 5) or a percentage of desired nodes (ex: 10%).\nAbsolute number is calculated from percentage by rounding down.\nMaxUnavailable can not be 0 if MaxSurge is 0, default is 0.\nBoth MaxUnavailable & MaxSurge must use the same units (absolute value or percentage).\nExample: when MaxUnavailable is set to 30%, old nodes can be deleted down to 70% of\ndesired nodes immediately when the rolling update starts. Once new nodes\nare ready, more old nodes be deleted, followed by provisioning new nodes,\nensuring that the total number of nodes available at all times during the\nupdate is at least 70% of desired nodes.",
                "default": 0,
                "validations": {
                  "pattern": "^((100|[0-9]{1,2})%|[0-9]+)$"
                }
              }
            }
          }
        }
      },
      "version": {
        "type": "string",
        "description": "Version specifies the OpenShift version of the nodes associated with this machinepool.\nROSAControlPlane version is used if not set."
      },
      "volumeSize": {
        "type": "integer",
        "description": "VolumeSize set the disk volume size for the machine pool, in Gib. The default is 300 GiB.",
        "validations": {
          "minimum": 75,
          "maximum": 16384
        }
      }
    }
  },
  "status": {
    "description": "RosaMachinePoolStatus defines the observed state of RosaMachinePool.",
    "fields": {
      "availableUpgrades": {
        "type": "array",
        "description": "Available upgrades for the ROSA MachinePool."
      },
      "conditions": {
        "type": "array",
        "description": "Conditions defines current service state of the managed machine pool",
        "fields": {
          "lastTransitionTime": {
            "type": "string",
            "description": "lastTransitionTime is the last time the condition transitioned from one status to another.\nThis should be when the underlying condition changed. If that is not known, then using the time when\nthe API field changed is acceptable.",
            "required": true
          },
          "message": {
            "type": "string",
            "description": "message is a human readable message indicating details about the transition.\nThis field may be empty."
          },
          "reason": {
            "type": "string",
            "description": "reason is the reason for the condition's last transition in CamelCase.\nThe specific API may choose whether or not this field is considered a guaranteed API.\nThis field may be empty."
          },
          "severity": {
            "type": "string",
            "description": "severity provides an explicit classification of Reason code, so the users or machines can immediately\nunderstand the current situation and act accordingly.\nThe Severity field MUST be set only when Status=False."
          },
          "status": {
            "type": "string",
            "description": "status of the condition, one of True, False, Unknown.",
            "required": true
          },
          "type": {
            "type": "string",
            "description": "type of condition in CamelCase or in foo.example.com/CamelCase.\nMany .condition.type values are consistent across resources like Available, but because arbitrary conditions\ncan be useful (see .node.status.conditions), the ability to deconflict is important.",
            "required": true
          }
        }
      },
      "failureMessage": {
        "type": "string",
        "description": "FailureMessage will be set in the event that there is a terminal problem\nreconciling the state and will be set to a descriptive error message.\nThis field should not be set for transitive errors that a controller\nfaces that are expected to be fixed automatically over\ntime (like service outages), but instead indicate that something is\nfundamentally wrong with the spec or the configuration of\nthe controller, and that manual intervention is required."
      },
      "id": {
        "type": "string",
        "description": "ID is the ID given by ROSA."
      },
      "ready": {
        "type": "boolean",
        "description": "Ready denotes that the RosaMachinePool nodepool has joined\nthe cluster",
        "required": true,
        "default": false
      },
      "replicas": {
        "type": "integer",
        "description": "Replicas is the most recently observed number of replicas."
      }
    }
  },
  "exampleYAML": "apiVersion: infrastructure.cluster.x-k8s.io/v1beta2\nkind: ROSAMachinePool\nmetadata:\n  name: example-rosamachinepool\n  namespace: default\nspec:\n  instanceType: \"example-instanceType\"\n  nodePoolName: \"example-nodePoolName\"\n"
}